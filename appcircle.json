{
  "version": "1",
  "workflows": {
    "ios-workflow": {
      "name": "iOS Build",
      "environment": {
        "flutter": "stable",
        "xcode": "latest",
        "cocoapods": "default"
      },
      "scripts": [
        {
          "name": "Get Flutter packages",
          "script": "flutter pub get"
        },
        {
          "name": "Build iOS Release",
          "script": "flutter build ios --release --no-codesign"
        },
        {
          "name": "Create Archive",
          "script": "cd ios && xcodebuild -workspace Runner.xcworkspace -scheme Runner -configuration Release -archivePath Runner.xcarchive archive"
        },
        {
          "name": "Export IPA",
          "script": "cd ios && xcodebuild -exportArchive -archivePath Runner.xcarchive -exportPath . -exportOptionsPlist exportOptions.plist"
        }
      ],
      "artifacts": [
        "ios/*.ipa",
        "ios/Runner.xcarchive"
      ]
    }
  }
}

